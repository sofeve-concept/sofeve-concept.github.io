"use strict";var CarouselTablist=function(e,t){t=Object.assign({moreaccessible:!1,paused:!1,norotate:!1},t||{});var n,s,o,i,a,r=window.matchMedia("(prefers-reduced-motion: reduce)");r.matches&&(t.paused=!0),this.domNode=e,this.tablistNode=e.querySelector("[role=tablist]"),this.containerNode=e.querySelector(".carousel-items"),this.tabNodes=[],this.tabpanelNodes=[],this.liveRegionNode=e.querySelector(".carousel-items"),this.pausePlayButtonNode=document.querySelector(".carousel-tablist .controls button.rotation"),this.playLabel="Lecture automatique",this.pauseLabel="Arrêt du défilement automatique",this.hasUserActivatedPlay=!1,this.isAutoRotationDisabled=t.norotate,this.isPlayingEnabled=!t.paused,this.timeInterval=5e3,this.currentIndex=0,this.slideTimeout=null,this.tablistNode.addEventListener("focusin",this.handleTabFocus.bind(this)),this.tablistNode.addEventListener("focusout",this.handleTabBlur.bind(this));for(a=e.querySelectorAll('[role="tab"]'),o=0;o<a.length;o++)s=a[o],this.tabNodes.push(s),s.addEventListener("keydown",this.handleTabKeydown.bind(this)),s.addEventListener("click",this.handleTabClick.bind(this)),n=document.getElementById(s.getAttribute("aria-controls")),n?(this.tabpanelNodes.push(n),n.addEventListener("focusin",this.handleTabpanelFocusIn.bind(this)),n.addEventListener("focusout",this.handleTabpanelFocusOut.bind(this)),i=n.querySelector(".carousel-image a"),i&&(i.addEventListener("focus",this.handleImageLinkFocus.bind(this)),i.addEventListener("blur",this.handleImageLinkBlur.bind(this)))):this.tabpanelNodes.push(null);this.pausePlayButtonNode&&this.pausePlayButtonNode.addEventListener("click",this.handlePausePlayButtonClick.bind(this)),this.domNode.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseOut.bind(this)),this.enableOrDisableAutoRotation(t.norotate),this.updatePlaying(!t.paused&&!t.norotate),this.setAccessibleStyling(t.moreaccessible),this.rotateSlides()};CarouselTablist.prototype.enableOrDisableAutoRotation=function(e){this.isAutoRotationDisabled=e,this.pausePlayButtonNode.hidden=e},CarouselTablist.prototype.setAccessibleStyling=function(e){e?this.domNode.classList.add("carousel-tablist-moreaccessible"):this.domNode.classList.remove("carousel-tablist-moreaccessible")},CarouselTablist.prototype.hideTabpanel=function(e){var t=this.tabNodes[e],n=this.tabpanelNodes[e];t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1"),n&&n.classList.remove("active")},CarouselTablist.prototype.showTabpanel=function(e,t){var n=this.tabNodes[e],s=this.tabpanelNodes[e];n.setAttribute("aria-selected","true"),n.removeAttribute("tabindex"),s&&s.classList.add("active"),t&&n.focus()},CarouselTablist.prototype.setSelectedTab=function(e,t){if(e===this.currentIndex)return;this.currentIndex=e;for(var n=0;n<this.tabNodes.length;n++)this.hideTabpanel(n);this.showTabpanel(e,t)},CarouselTablist.prototype.setSelectedToPreviousTab=function(e){var t=this.currentIndex-1;t<0&&(t=this.tabNodes.length-1),this.setSelectedTab(t,e)},CarouselTablist.prototype.setSelectedToNextTab=function(e){var t=this.currentIndex+1;t>=this.tabNodes.length&&(t=0),this.setSelectedTab(t,e)},CarouselTablist.prototype.rotateSlides=function(){this.isAutoRotationDisabled||(!this.hasFocus&&!this.hasHover&&this.isPlayingEnabled||this.hasUserActivatedPlay)&&this.setSelectedToNextTab(!1),this.slideTimeout=setTimeout(this.rotateSlides.bind(this),this.timeInterval)},CarouselTablist.prototype.updatePlaying=function(e){this.isPlayingEnabled=e,e?(this.pausePlayButtonNode.setAttribute("aria-label",this.pauseLabel),this.pausePlayButtonNode.classList.remove("play"),this.pausePlayButtonNode.classList.add("pause"),this.liveRegionNode.setAttribute("aria-live","off")):(this.pausePlayButtonNode.setAttribute("aria-label",this.playLabel),this.pausePlayButtonNode.classList.remove("pause"),this.pausePlayButtonNode.classList.add("play"),this.liveRegionNode.setAttribute("aria-live","polite"))},CarouselTablist.prototype.handleImageLinkFocus=function(){this.liveRegionNode.classList.add("focus")},CarouselTablist.prototype.handleImageLinkBlur=function(){this.liveRegionNode.classList.remove("focus")},CarouselTablist.prototype.handleMouseOver=function(e){this.pausePlayButtonNode.contains(e.target)||(this.hasHover=!0)},CarouselTablist.prototype.handleMouseOut=function(){this.hasHover=!1},CarouselTablist.prototype.handlePausePlayButtonClick=function(){this.hasUserActivatedPlay=!this.isPlayingEnabled,this.updatePlaying(!this.isPlayingEnabled)},CarouselTablist.prototype.handleTabKeydown=function(e){var t=!1;switch(e.key){case"ArrowRight":this.setSelectedToNextTab(!0),t=!0;break;case"ArrowLeft":this.setSelectedToPreviousTab(!0),t=!0;break;case"Home":this.setSelectedTab(0,!0),t=!0;break;case"End":this.setSelectedTab(this.tabNodes.length-1,!0),t=!0;break;default:break}t&&(e.stopPropagation(),e.preventDefault())},CarouselTablist.prototype.handleTabClick=function(e){var t=this.tabNodes.indexOf(e.currentTarget);this.setSelectedTab(t,!0)},CarouselTablist.prototype.handleTabFocus=function(){this.tablistNode.classList.add("focus"),this.liveRegionNode.setAttribute("aria-live","polite"),this.hasFocus=!0},CarouselTablist.prototype.handleTabBlur=function(){this.tablistNode.classList.remove("focus"),this.playState&&this.liveRegionNode.setAttribute("aria-live","off"),this.hasFocus=!1},CarouselTablist.prototype.handleTabpanelFocusIn=function(){this.hasFocus=!0},CarouselTablist.prototype.handleTabpanelFocusOut=function(){this.hasFocus=!1},window.addEventListener("load",function(){var e=document.querySelectorAll(".carousel-tablist"),t=[],n={};e.forEach(function(e){t.push(new CarouselTablist(e,n))})},!1)